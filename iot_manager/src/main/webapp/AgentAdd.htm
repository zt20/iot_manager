<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>添加代理商</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/plugins/select2/select2.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/add.css">
    <style type="text/css">
        .additional {
            display: none;
        }
    </style>
    <!--[if IE 7]>
    <link rel="stylesheet" href="css/font-awesome-ie7.min.css">
    <link rel="stylesheet" href="css/ie7.css">
    <![endif]-->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/plugins/form/jquery.form.min.js"></script>
    <script type="text/javascript" src="js/plugins/validation/jquery.validate.min.js"></script>
    <script type="text/javascript" src="js/plugins/validation/additional-methods.min.js"></script>
    <script type="text/javascript" src="js/plugins/select2/select2.min.js"></script>
    <script type="text/javascript" src="js/plugins/bootbox/jquery.bootbox.js"></script>
    <script type="text/javascript" src="js/init.js"></script>
    <script type="text/javascript" src="js/loading.js"></script>
    <script type="text/javascript" src="js/md5.js"></script>

    <!--[if lte IE 9]>
    <script type="text/javascript" src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
    <script>
        $(document).ready(function () {
            $("input, textarea").placeholder();
        });
    </script>
    <![endif]-->
    <script type="text/javascript">
        // $(document).ready(function () {
        // 	$("#agentType").on("click", function () {
        // 		if ($("#agentType").is(':checked')) {
        // 			$(".additional").show();
        // 		} else {
        // 			$(".additional").hide();
        // 		}
        //     });
        //     $(".M2MBillingModel").on("click", function () {
        //         if ($(this).val() == 0) {
        //             $(".M2MBillingModel_0").show();
        //         } else {
        //             $(".M2MBillingModel_0").hide();
        //         }
        //     });
        // 	$("#formAgent").ajaxForm({
        // 		success: function (result) {
        // 			bootbox.alert(result.Message, function (box) {
        // 				if (result.OK) {
        // 					$("#formAgent").resetForm();
        // 				}
        // 			});
        // 		},
        // 		error: function (XmlHttpRequest, textStatus, errorThrown) {
        // 			bootbox.alert("操作失败:服务器错误");
        // 		}
        // 	});
        //
        // });

    </script>
</head>
<body>
<div class="container-fluid" id="content">
    <div id="main">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <div class="box box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="icon-ok-sign"></i>
                                代理商</h3>
                        </div>
                        <div class="box-content">
                            <!--<form action="AgentAdd.htm?action=add" method="POST" class="form-horizontal form-validate" id="formAgent">-->
                            <div class="form-horizontal form-validate" id="formAgent">
                                <div class="control-group">
                                    <label for="account" class="control-label">登录帐号：</label>
                                    <div class="controls">
                                        <input type="text" id="account" name="account" class="input-xlarge"
                                               maxlength="20" data-rule-required="true" data-msg-required="请填写登录帐号"
                                               data-rule-minlength="3" data-msg-minlength="登录账号至少3位"
                                               title="登录账号必填，最大允许输入20个字符"/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="password" class="control-label">登录密码：</label>
                                    <div class="controls">
                                        <input type="password" id="password" name="password" class="input-xlarge"
                                               maxlength="32" data-rule-required="true" data-msg-required="请填写登录密码"
                                               data-rule-minlength="3" data-msg-minlength="登录密码至少为3位"
                                               title="登录密码必填，最大允许输入32个字符"/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="repassword" class="control-label">确认密码：</label>
                                    <div class="controls">
                                        <input type="password" id="repassword" name="repassword" maxlength="32"
                                               class="input-xlarge" data-rule-required="true"
                                               data-msg-required="请再次确认密码" data-rule-equalto="#password"
                                               data-msg-equalto="两次密码不匹配" title="确认密码必填，必须与登录密码一致"/>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label for="agentName" class="control-label">代理名称：</label>
                                    <div class="controls">
                                        <input type="text" id="agentName" name="agentName" class="input-xlarge"
                                               maxlength="20" data-rule-required="true" data-msg-required="请填写代理名称"
                                               data-rule-minlength="3" data-msg-minlength="代理名称至少3位"
                                               title="代理名称必填，最大允许输入20个字符"/>
                                    </div>
                                </div>
                                <!--<div class="control-group">-->
                                <!--<label for="nickName" class="control-label">昵称：</label>-->
                                <!--<div class="controls">-->
                                <!--<input type="text" id="nickName" name="nickName" class="input-xlarge"/>-->
                                <!--</div>-->
                                <!--</div>-->
                                <div class="control-group">
                                    <label for="mobile" class="control-label">手机号码：</label>
                                    <div class="controls">
                                        <input type="text" id="mobile" name="mobile" class="input-xlarge" maxlength="11"
                                               data-rule-mobile="true" data-msg-mobile="手机号格式不正确"
                                               placeholder=" 例：13900000000" title="手机号码最大允许输入11个字符 "/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="email" class="control-label">电子邮件：</label>
                                    <div class="controls">
                                        <input type="text" id="email" name="email" class="input-xlarge" maxlength="50"
                                               data-rule-email="true" data-msg-email="电子邮箱格式不正确"
                                               placeholder=" 例：88888888@qq.com" title="电子邮件最大允许输入50个字符 "/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="address" class="control-label">联系地址：</label>
                                    <div class="controls">
                                        <textarea id="address" name="address" rows="5"
                                                  class="input-block-level"></textarea>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="telephone1" class="control-label">服务热线：</label>
                                    <div class="controls">
                                        <input type="text" id="telephone1" name="telephone1" class="input-xlarge"/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="telephone2" class="control-label">售前热线：</label>
                                    <div class="controls">
                                        <input type="text" id="telephone2" name="telephone2" class="input-xlarge"/>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label for="telephone2" class="control-label">物联网计费模式：</label>
                                    <div class="controls">
                                        <input type="radio" name="M2MBillingModel" value="0" checked="checked"
                                               class="bannerOemRadio input-xlarge M2MBillingModel"/> 返佣
                                        <input type="radio" name="M2MBillingModel" value="1"
                                               class="bannerOemRadio input-xlarge M2MBillingModel"/> 预存
                                    </div>
                                </div>
                                <div class="control-group M2MBillingModel_0">
                                    <label for="telephone2" class="control-label">物联网返佣模式：</label>
                                    <div class="controls">
                                        <input type="radio" name="M2MRebateMode" value="0" checked="checked"
                                               class="bannerOemRadio input-xlarge"/> 按比例
                                        <input type="radio" name="M2MRebateMode" value="1"
                                               class="bannerOemRadio input-xlarge"/> 固定金额
                                    </div>
                                </div>
                                <div class="control-group M2MBillingModel_0">
                                    <label for="M2MRebateValue" class="control-label">返佣值：</label>
                                    <div class="controls">
                                        <input type="text" id="M2MRebateValue" name="M2MRebateValue"
                                               class="input-small"/>按比例时，需小于1
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label for="company" class="control-label">企业名称：</label>
                                    <div class="controls">
                                        <input type="text" id="company" name="company" class="input-xlarge"
                                               maxlength="50" title="企业名称"/>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label for="agentName" class="control-label">开户银行：</label>
                                    <div class="controls">
                                        <input type="text" id="bankName" name="bankName" class="input-xlarge" value=""
                                               maxlength="25" title="开户银行必填，最大允许输入25个字符"/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="account" class="control-label">开户名称：</label>
                                    <div class="controls">
                                        <input type="text" id="bankUserName" name="bankUserName" class="input-xlarge"
                                               value="" maxlength="25" title="开户名称必填，最大允许输入25个字符"/>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label for="bankAccount" class="control-label">银行账号：</label>
                                    <div class="controls">
                                        <input type="text" id="bankAccount" name="bankAccount" class="input-xlarge"
                                               value="" maxlength="25" title="账号必填，最大允许输入25个字符"/>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary" id="btnSubmit">
                                        <i class="icon-ok-sign"></i>
                                        添加代理商
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>

<script>


    $("#btnSubmit").click(function () {
        var account = $("#account").val();
        var name = $("#agentName").val();
        var password = hex_md5($("#password").val());
        var mobile = $("#mobile").val();
        var email = $("#email").val();
        var address = $("#address").val();
        var serviceHotLine = $("#telephone1").val();
        var preSaleHotLine = $("#telephone2").val();
        var billingMode = $(":radio[name='M2MBillingModel']:checked").val();
        var rebateMode = $(":radio[name='M2MRebateMode']:checked").val();
        var rebateValue = $("#M2MRebateValue").val();
        var companyName = $("#company").val();
        var bankName = $("#bankName").val();
        var bankUserName = $("#bankUserName").val();
        var bankAccount = $("#bankAccount").val();
        console.log("click end" + billingMode + ";" + rebateMode + ";" + bankUserName);
        $.ajax({
            type: 'POST',
            url: '/api/v1/agent_add.do',
            data: {
                agentAccount: account,
                name: name,
                password: password,
                mobile: mobile,
                email: email,
                address: address,
                serviceHotLine: serviceHotLine,
                preSaleHotLine: preSaleHotLine,
                billingMode: billingMode,
                rebateValue: rebateValue,
                rebateMode: rebateMode,
                companyName: companyName,
                bankName: bankName,
                bankUserName: bankUserName,
                bankAccount: bankAccount
            },
            success:function(data) {
                console.log(data);
                if (data.code == 0) {
                    alert("添加成功!");
                    window.location.href = '/AgentList.htm';
                } else {
                    alert(data.msg);
                }

            },
            error: function(XMLHttpRequest) {
                alert("系统出错了" + XMLHttpRequest.status );
            },
        });

    });

</script>
</html>
